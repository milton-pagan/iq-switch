#include "../include/sim.h"

using namespace std;

//Constructor
Simulation:: Simulation(Switch& iq, int arrivals):iq_switch{iq_switch},gen{rd()}
                                                 , poi{poisson_distribution<>{1}}
                                                 , num_arrivals{arrivals}
                                                 ,unif{uniform_int_distribution<int>{0,
                                                        iq_switch.get_size() - 1 }} {
}

void Simulation:: gen_arrivals() {
  int i, j;
  int temp {poi(gen)};

  //Generates random (i,j) and adds arrival
  for(int n = 0; n < temp; n++) {
    i = unif(gen);
    j = unif(gen);

    iq_switch.add_arrival(i, j);

  }
}

int Simulation:: get_arrivals(){
  return num_arrivals;
}
